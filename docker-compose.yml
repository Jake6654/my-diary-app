version: '3.8'

services:
  # 1. 데이터베이스 (PostgreSQL)
  postgres:
    image: postgres:16
    container_name: diary-postgres
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: diarydb
    ports:
      - "5432:5432" # PostgreSQL 
    volumes:
      - ./data/db:/var/lib/postgresql/data # 데이터를 로컬 폴더에 영구 저장 (테스트용)
    restart: always

  # 2. 메시지 브로커 (Redis) - 백엔드와 AI 서버 통신용
  redis:
    image: redis:alpine
    container_name: diary-redis
    ports:
      - "6379:6379" # Redis 
    restart: always

# (참고) Python AI 서버와 Spring Boot는 나중에 코드가 완성되면 여기에 추가합니다.